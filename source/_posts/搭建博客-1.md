---
title: 搭建博客-1
date: 2023-10-25 22:11:44
tags: blog
excerpt: 快速搭建hexo框架+GitHubpage的博客，操作以及捉bug
---



## 一、目标

通过[Hexo](https://hexo.io/zh-cn/)和[Github](https://github.com/)搭建blog（变成了抓bug记录了）

参考文章：

1. [GitHub+Hexo 搭建个人网站详细教程 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/26625249)
2. [2022【保姆级教程】含泪搭建hexo博客 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/552639819)



## 二、环境配置

### GitHub

1. 在GitHub中创建账号。可以使用QQ邮箱
2. 创建仓库repository。仓库名应该为：**用户名**.github.io  这个**用户名**使用你的GitHub帐号名称代替，是固定写法。



### Git

1. Git是开源的分布式版本控制系统

2. 安装Git。[Git - Downloading Package](https://link.zhihu.com/?target=https%3A//git-scm.com/download/win) 

3. 下载后默认配置安装，在命令行里输入git测试是否安装成功。

4. 参考教程：[Git教程 - 廖雪峰的官方网站 (liaoxuefeng.com)](https://www.liaoxuefeng.com/wiki/896043488029600)

   

### Git与GitHub绑定

鼠标右击打开Git Bash，输入

```
git config --global user.name “你的GitHub用户名"
git config --global user.email "你的GitHub注册邮箱"
```

注：不需要引号，是阅读标注



### hexo环境配置

1. 安装Node.js，[Download | Node.js](https://link.zhihu.com/?target=https%3A//nodejs.org/en/download/) 
2. Node.js会包含环境变量及npm的安装。
3. 安装后，检测Node.js是否安装成功，在命令行中输入 node -v :



### 密钥配置

继续输入

```bash
ssh-keygen -t rsa -C "你的GitHub注册邮箱"
```

然后直接三个回车即可，生成ssh密钥文件。

默认不需要设置密码

然后找到生成的.ssh的文件夹中的id_rsa.pub密钥，将内容全部复制到GitHub右上角头像->Settings->keys页面，新建new SSH Key

Title为标题，任意填即可。将刚刚复制的id_rsa.pub内容粘贴进去，最后点击Add SSH key。

在Git Bash中检测GitHub公钥设置是否成功，输入 `ssh git@github.com`

原理：通过非对称加密rsa算法实现对push（提交）用户的认证



#### 打开pub报错

解决方法

1. [cmd窗口查看](https://blog.csdn.net/J_____Q/article/details/108866850)
2. [在线打开 PUB 文件 ](https://blog.aspose.com/zh/pub/publisher-viewer-online-open-pub-file-online/#:~:text=如何在线打开 PUB 文件 1 只需拖放您的 PUB 文件或使用浏览文件按钮上传。 您还可以提供文件,3 之后，您将能够在渲染后立即查看您的 PUB 文件。 4 将您的 PUB 页面保存为图像文件。)



#### 检测GitHub公钥设置报错

```
ASUS@LAPTOP-GEMI5NEH MINGW64 ~/.ssh
$ ssh git@github.com
ssh: connect to host github.com port 22: Connection timed out
```

解决方法

1. [关于本地git通过ssh链接github时 time out问题的解决方法_github timeout-CSDN博客](https://blog.csdn.net/the__future/article/details/130038818)
2. [坑：ssh: connect to host github.com port 22: Connection refused - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/521340971)
3. 如果没有config文件可以自己创建，先输入内容。
4. 保存时把类型选为“所有文件” 怎么弄？新建文本文档后，输完你的代码后，点击—文件—另存为—保存类型—所有文件就可以了,选完存储路径后可以不改文件名会直接覆盖掉。
5. 另存无效，我直接修改后缀名
6. `$ ssh -T git@github.com`检测是否连通，又有bug
2. [解决The authenticity of host ... can't be established.](https://blog.csdn.net/fearlessxmm/article/details/90401690 )
2. 直接yes完成



## 三、创建blog（本地）

 这里需要自己在电脑常里创建一个文件夹，可以命名为Blog，Hexo框架与以后你自己发布的网页都在这个文件夹中。创建好后，进入文件夹中，按住shift键，右击鼠标点击命令行



使用npm命令安装Hexo，输入：

```bash
npm install -g hexo-cli 
```



安装完成后，初始化我们的博客，输入：

```bash
hexo init blog
```

注意，这里的命令都是作用在刚刚创建的Blog文件夹中。



别按顺序输入以下三条命令（在init新的文件夹里打开命令行）：

```bash
hexo new test_my_site

hexo g

hexo s
```

完成后，打开浏览器输入地址：

localhost:4000，可以看到新建的blog



### hexo new test_my_site的报错

```
PS D:\Blog\blog> hexo new test_my_site
ERROR Cannot find module 'moment'
```

解决方法

[【node报错解决方案】Error: Cannot find module http-errors_node:module 报错-CSDN博客](https://blog.csdn.net/qq_43592352/article/details/106922540)





## 四、发布网站（Hexo与GitHub关联）

在blog根目录里的_config.yml文件称为**站点配置文件**

themes文件夹，里面也有个_config.yml文件，这个称为**主题配置文件**

打开站点的配置文件_config.yml

```
deploy：
	type：qit
	repo: https://github.com/用户名/用户名.github.io.git
	branch: master
```

repo: 这里填入你之前在GitHub上创建仓库的完整路径，记得加上 .git

指令的目录要在blog目录底下，不然可能报错。

发布逻辑：new -> generate -> sever -> deploy 

```
hexo g  //生成静态文件
hexo s  //本地预览
hexo d  //部署文件
```



### yml代码冒号后没有空格会报错

错误代码

```
PS D:\Blog\blog> hexo clean
FATAL
YAMLException: can not read a block mapping entry; a multiline key may not be an implicit key (107:16)

 104 | deploy:
 105 |   type: 'git'
 106 |   repo:https://github.com/narrciss/narrciss.gi ...
 107 |   branch:master
----------------------^
```



## 五、发布bug



之前是404报错，但是之后可以访问，但是**deploy总是失败**

删除title的tag内容之后可以预览，但不能deploy。

第二天deploy又可以了



### 检测链接的命令

```
$ ssh -T -p 443 git@ssh.github.com
$ ssh git@github.com
使用` ssh -vT git@github.com`检测ssh链接过程
```



### 页面404报错提示

```
fatal: unable to access 'https://github.com/narrciss/narrciss.github.io.git/': Recv failure: Connection was reset
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
    at ChildProcess.<anonymous> (D:\Blog\blog\node_modules\hexo-util\lib\spawn.js:51:21)
    at ChildProcess.emit (node:events:514:28)
    at cp.emit (D:\Blog\blog\node_modules\cross-spawn\lib\enoent.js:34:29)
    at ChildProcess._handle.onexit (node:internal/child_process:294:12)
```



### 解决方法1（无效）

开启Devsidecar的Git代理发布文章也报错

```
fatal: unable to access 'https://github.com/narrciss/narrciss.github.io.git/': The requested URL returned error: 408
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
```



### 解决方法2（无效）

**There isn't a GitHub Pages site here.**

是不是应该编辑完成后生成静态文件再发布，还是不行。



### 解决方法3（不适合）

[Hexo部署出现错误err: Error: Spawn failed解决方式_wei-xiansen的博客-CSDN博客](https://blog.csdn.net/weixin_41256398/article/details/117994899)

[解决hexo报错spwan failed - CairBin - 博客园 (cnblogs.com)](https://www.cnblogs.com/cairbin/p/14957855.html)

（注意链接1~2的**报错code：128**，我没有，使用此方法导致新的错误）

找到C盘的.gitconfig文件，删除增添的配置

[idea使用git提交代码时报错Push failed Bad boolean config value ‘“false”‘ for ‘http.sslverify‘-CSDN博客](https://blog.csdn.net/wangxingxingalulu/article/details/118392299)

使用

```
fatal: bad boolean config value 'fase' for 'core.autocrlf'
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
```

修改

```
fatal: bad boolean config value 'ture' for 'core.autocrlf'
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
```

不小心删多了报错，完成后又回到原来的报错状态了。

[使用hexo deploy时遇到fatal: Not a git repository (or any of the parent directories): .git的错误 | 楼兰故居 (cosysn.github.io)](https://cosysn.github.io/2016/11/26/hexo-deploy-occur-fatal-Not-a-git-repository-or-any-of-the-parent-directories-git的错误/#:~:text=将hexo根目录下的.deploy_git%2F删除掉，然后使用hexo,deploy重新部署就可以了。)

```
fatal: not a git repository (or any of the parent directories): .git
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
```



### 解决方法4（有点用）

检查远程仓库状态：使用git remote -v命令检查远程仓库的状态，确保远程仓库的URL正确且可用。

```
$ git remote -v
fatal: not a git repository (or any of the parent directories): .git
```

发现没有repository

检测ssh链接

```
$ ssh -T git@github.com
Connection reset by 20.205.243.160 port 443
```

[【Note】git上手-解决连接github时connection reset的问题_github connection reset-CSDN博客](https://blog.csdn.net/weixin_51594453/article/details/120605700)

修改了.ssh目录的config，之后的bug

```
fatal: unable to access 'https://github.com/narrciss/narrciss.github.io.git/': Failed to connect to github.com port 443 after 21209 ms: Couldn't connect to server
FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html
Error: Spawn failed
```



### 解决方法5（没有使用）

[坑：ssh: connect to host github.com port 22: Connection refused - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/521340971)

